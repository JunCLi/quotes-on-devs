!function(e){const t=window.location.href,n=t=>{const n=e(".entry-content"),o=e(".entry-title");n.html(t.content.rendered),o.html(t.title.rendered)};e("#another-quote").on("click",o=>{o.preventDefault(),e.ajax({method:"GET",url:random_quote.rest_url+"wp/v2/posts?per_page=100",beforeSend:e=>{e.setRequestHeader("X-WP-Nonce",random_quote.wpapi_nonce)}}).done(e=>{const o=e[Math.floor(Math.random()*e.length)],s=t+o.slug;n(o),history.pushState(o,o.content.rendered,s)}).fail(()=>{}).always(()=>{})}),window.addEventListener("popstate",function(e){null!==e.state?n(e.state):history.go(0)});const o=e=>{s.addClass("hidden");let n='<div class="error-message">\n    <p>There has been an error processing your quote submission, please try again.</p>\n    <button>try again</button>\n    </div>';if("missingcontent"===e)n='<div class="error-message">\n      <p>There has been an error processing your quote submission. Your quote field is empty. Please try again.</p>\n      <button>try again</button>\n      </div>';else if(e.statusText){if("unauthorized"===e.statusText.toLowerCase()){let e=t.split("/"),o=t;for(let t=1;t<e.length;t++)e.slice(0,-t).includes("submit")&&(o=e.slice(0,-t-1));o=o.join("/"),n=`<div class="error-message">\n        <p>Sorry, you must be logged in to submit a quote!</p>\n        <p><a href="${o+="/"}wp-login.php">Click here to login.</a></p>\n        </div>`}}s.after(n)},s=e("#submit-new-quote");s.on("submit",t=>{t.preventDefault();let n={};s.find("[name]").each((e,t)=>{console.log(n[t.name]),"content"===n[t.name]&&""===t.value.trim()&&o("missingcontent"),n[t.name]=t.value}),n.status="publish",n.category="User Submitted",e.ajax({method:"POST",url:submit_quote.rest_url+"wp/v2/posts",data:n,dataType:"json",beforeSend:e=>{e.setRequestHeader("X-WP-Nonce",submit_quote.wpapi_nonce)}}).done(()=>{s.addClass("hidden");s.after('<div class="submit-another"><p>Your quote has been submitted!</p><button type="button">Submit Another Quote</button></div>')}).fail(e=>{o(e)}).always(()=>{})})}(jQuery);